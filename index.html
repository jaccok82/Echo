
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Echo Demo</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            background: black;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        .avatar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: url('echo-face.png') no-repeat center center;
            background-size: cover;
            z-index: 1;
        }
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 2;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 8px;
        }
        .controls label, .controls input {
            color: white;
            display: block;
            margin-bottom: 8px;
        }
        button {
            padding: 10px 15px;
            font-size: 16px;
            background: #3346ff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="avatar" id="avatar"></div>
    <div class="controls">
        <label for="volume">Volume</label>
        <input type="range" id="volume" min="0" max="1" step="0.1" value="1">
        <label><input type="checkbox" id="mimic" checked> Mimiek aan</label>
        <button onclick="startListening()">Praat met Echo</button>
    </div>
    <script>
        const synth = window.speechSynthesis;
        const volumeSlider = document.getElementById('volume');
        let mimicEnabled = true;

        document.getElementById('mimic').addEventListener('change', (e) => {
            mimicEnabled = e.target.checked;
            document.getElementById('avatar').style.filter = mimicEnabled ? 'brightness(1)' : 'grayscale(100%)';
        });

        function speak(text) {
            const utter = new SpeechSynthesisUtterance(text);
            utter.volume = parseFloat(volumeSlider.value);
            synth.speak(utter);
        }

        function startListening() {
            if (!('webkitSpeechRecognition' in window)) {
                alert("Deze demo werkt alleen in Chrome.");
                return;
            }

            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'nl-NL';
            recognition.start();

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                console.log("Gebruiker zei:", transcript);
                respondTo(transcript);
            };

            recognition.onerror = function(event) {
                alert("Er ging iets mis met luisteren: " + event.error);
            };
        }

        function respondTo(input) {
            speak("Hoi Jacco, ik ben blij dat je er bent. Waar wil je over praten?");
        }
    </script>
</body>
</html>
